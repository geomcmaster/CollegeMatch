<!-- List o' tasks -->
<!--
TASK				QUERY			SCOPE	
register user		insert			1 table
save user data		insert/update	1 table
delete user data	delete			1 table
save favorites		insert/update	3+ tables (depends on user, field, school)
search	(school)	select
 -- location						2 tables
 -- demographics					2-3 tables
 -- field of study					2 tables
 -- based on user location			3 tables, w/ subqueries
search (field)		select			1 table
display search results
display user data
display favorites
-->
<html>
<head>
	<title>CollegeMatch: Register/Log In</title> <!-- this will change with each page -->
	<link rel="stylesheet" type="text/css" href="style.css" />
</head>

<body>

	<div id="wrap"> <!-- open wrap -->
	<div id="header"></div>
	<div id="contentwrap">
	
	<!-- REGISTRATION / LOG IN (NO SIDEBAR) -->
	<div id="contentnoside">
		<div id="title">
			<h2>Register an Account / Log In</h2>
		</div>
		<div class="left"><h4>Register</h4>
			<form id="register" action="newaccount.jsp" method="POST" onSubmit="return checkForm()">
			<table>
				<tr>
					<td class="label"><label for="reg_un">Username:</label></td>
					<td class="input"><input type="text" id="reg_un" name="reg_un" class="inbox" /></td>
				</tr><tr>
					<td class="label"><label for="reg_pw">Password:</label></td>
					<td class="input"><input type="password" id="reg_pw" name="reg_pw" class="inbox" onBlur="comparePWs()" /></td>
				</tr><tr>
					<td class="label"><label for="pwcheck">Re-enter Password:</label></td>
					<td class="input"><input type="password" id="pwcheck" name="pwcheck" class="inbox" onBlur="comparePWs()" /></td>
				</tr>
			</table>
			<table>
				<tr>
					<td class="label"><span id="nomatch" class="hidden alert">!! The passwords you have entered do not match.</span></td>
					<td class="input"><input type="submit" id="reg_submit" value="Register"></td>
				</tr>
			</table>
			</form>
		</div>
		<div class="right"><h4>Log In</h4>
			<form id="login" action="login.jsp" method="POST">
			<table>
				<tr>
					<td class="label"><label for="log_un">Username:</label></td>
					<td class="input"><input type="text" id="log_un" name="sb_username" class="inbox" /></td>
				</tr>
				<tr>
					<td class="label"><label for="log_pw">Password:</label></td>
					<td class="input"><input type="password" id="log_pw" name="sb_password" class="inbox" /></td>
				</tr>
			</table>
			<table>
				<tr>
					<td class="label alt-action"><a href="">Forget your password?</a></td>
					<td class="input"><input type="submit" id="log_submit" value="Log In"></td>
				</tr>
			</form>
		</div>
	</div>
	
	</div></div> <!-- close wrap -->
	
<script type="text/javascript">
	function comparePWs() {
		var elFirstPw = document.getElementById("reg_pw");
		var elSecondPw = document.getElementById("pwcheck");
		if (elFirstPw.value.length > 0 && elSecondPw.value.length > 0) {
			if (elFirstPw.value != elSecondPw.value) {
				document.getElementById("nomatch").classList.remove("hidden");
				document.getElementById("reg_submit").disabled = true;
				return false;
			} else {
				document.getElementById("nomatch").classList.add("hidden");
				document.getElementById("reg_submit").disabled = false;
				return true;
			}
		}
	}
	
	function checkForm() {
		var elFirstPw = document.getElementById("reg_pw");
		var elSecondPw = document.getElementById("pwcheck");
		var elUsername = document.getElementById("reg_un");
		
		if (elUsername.value.length > 0 && 
			elFirstPw.value.length > 0 && 
			elSecondPw.value.length > 0 && 
			comparePWs()) {
				return true;
		} else {
			alert("You must fill out all fields of the registration form.");
			return false;
		}
	}
</script>
	
</body>
</html>